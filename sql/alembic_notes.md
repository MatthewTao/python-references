# Alembic Thoughts

Seems to be a way to manage changes to particular schema.
It will generate upgrade and downgrade steps for a given changeset.
This seems quite handy to seamlessly move between versions for an application
which might not want to be stopped.
I'm not sure how whether it will handle jumping multiple versions though.
That could be interesting to see.

## Alembic config

There are a fair few configs that can be specified in the required `alembic.ini` file.
From there all the various things would be defined:

- where to put the change sets or migration scripts
- connection strings to the database to take action etc.

## Samples

We would first generate a 'change set' by running the revision command,
along with various tags and descriptions.

``` shell
alembic revision --autogenerate -m "First Schema Creation"

alembic revision --autogenerate -m "add artist dob" 
```

This autogenerated change set may not contain all the right steps,
as it is just a best guess.
we can modify that to fit what we actually need.

### Upgrade

After the change set is generated and confirmed, run the upgrade command `alembic upgrade head` command.
This will action the change set to the latest version.

You can also upgrade to a specified version if desired.
Each version will have an identifying number, e.g. `8e9dfa834f14`.
so the upgrade command can also be run like `alembic upgrade 8e9dfa834f14`
or even `alembic upgrade 8e9df` if the first few digits already uniquely identifies the version.
Alternatively, relative upgrades are also supported, `alembic upgrade +2`
, `alembic upgrade 8e9dfa834f14+2` specifies what version the relative upgrade should go off.

## Generated Steps

The steps generated can do a whole bunch of things

## Behaviour when upgrade fails

When the upgrade fails, it doesn't do a roll back automatically I guess.
This needs to be explored a bit more I think.
